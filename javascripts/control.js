var CJS=CJS||{};CJS.start=function(){CJS.init(),CJS.findScripts(),CJS.downloadScripts(),CJS.defer?"undefined"!=typeof document.readyState&&"complete"===document.readyState?CJS.processScripts():CJS.addHandler(window,"load",CJS.processScripts):(alert("Immediate processing is not currently supported."),CJS.processScripts())},CJS.findScripts=function(){for(var e=document.getElementsByTagName("script"),t=e.length,r=0;t>r;r++){var i=e[r];"text/cjs"===CJS.getAttribute(i,"type")&&"undefined"==typeof i.cjsfound&&(CJS.aScripts[CJS.aScripts.length]=i,i.cjsfound=!0)}},CJS.downloadScripts=function(){for(var e=CJS.aScripts.length,t=0;e>t;t++){var r=CJS.aScripts[t],i=CJS.getAttribute(r,"data-cjssrc")||CJS.getAttribute(r,"cjssrc");i&&CJS.downloadScript(i)}},CJS.downloadScript=function(e){CJS.dprint("downloading "+e),CJS.bIE||CJS.bOpera?CJS.downloadScriptImage(e):CJS.downloadScriptObject(e)},CJS.downloadScriptImage=function(e){var t=new Image;t.onload=function(){CJS.onloadCallback(e)},t.onerror=function(){CJS.onloadCallback(e)},t.src=e},CJS.downloadScriptObject=function(e){if("undefined"==typeof document.body||!document.body)return void setTimeout("CJS.downloadScriptObject('"+e+"')",50);var t=document.createElement("object");t.data=e,t.width=0,t.height=0,t.onload=function(){CJS.onloadCallback(e)},t.onerror=function(){CJS.onloadCallback(e)},document.body.appendChild(t)},CJS.onloadCallback=function(e){CJS.hLoaded[e]=!0},CJS.execCallback=function(e){return CJS.dprint("execCallback: "+e),0===CJS.aExecs.length?void CJS.dprint("ERROR: We finished executing a script but the exec queue is empty: "+e):(e==CJS.aExecs[0][0]?CJS.aExecs.splice(0,1):CJS.dprint("ERROR: We finished executing a script that wasn't on the queue: "+e),void(CJS.aExecs.length&&CJS.execScript(CJS.aExecs[0][0],CJS.aExecs[0][1])))},CJS.processScripts=function(){CJS.processNextScript()},CJS.processNextScript=function(){if(CJS.aScripts.length){var e=CJS.aScripts[0];CJS.curScript=e;var t=CJS.getAttribute(e,"data-cjssrc")||CJS.getAttribute(e,"cjssrc"),r=CJS.getAttribute(e,"data-cjsexec")||CJS.getAttribute(e,"cjsexec");if(t)if("false"===r)CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0);else if(CJS.hLoaded[t])CJS.processExternalScript(e,CJS.processNextScript),CJS.aScripts.splice(0,1);else{CJS.dprint("processNextScript: waiting for script "+t),"undefined"==typeof e.startwait&&(e.startwait=Number(new Date));var i=Number(new Date)-e.startwait;i<CJS.maxWait?setTimeout(CJS.processNextScript,CJS.waitival):alert("There was an error loading script: "+t)}else CJS.processInlineScript(e),CJS.aScripts.splice(0,1),setTimeout(CJS.processNextScript,0)}else{if(CJS.findScripts(),CJS.aScripts.length)return CJS.downloadScripts(),void setTimeout(CJS.processNextScript,0);document.write=CJS.docwriteOrig,CJS.dprint("DONE processing scripts")}},CJS.processInlineScript=function(e){CJS.curScript=e;var t=e.text;CJS.dprint("processInlineScript: processing script code: "+t.substring(0,64)),CJS.eval(t)},CJS.processExternalScript=function(e,t){var r=CJS.getAttribute(e,"data-cjssrc")||CJS.getAttribute(e,"cjssrc");CJS.dprint("processExternalScript: processing script "+r),CJS.execScript(r,t)},CJS.execScript=function(e,t){if(CJS.dprint("execScript: "+e),0===CJS.aExecs.length)CJS.aExecs[CJS.aExecs.length]=[e,t];else if(e!=CJS.aExecs[0][0])return CJS.dprint("execScript: queueing for later: "+e),void(CJS.aExecs[CJS.aExecs.length]=[e,t]);var r=function(e){switch(typeof e){case"string":e=new Function(e);break;case"function":break;default:e=new Function}return e}(t),i=function(){this.readyState&&"complete"!=this.readyState&&"loaded"!=this.readyState||(CJS.execCallback(e),this.onload=this.onreadystatechange=null,r())},c=document.createElement("script");c.onload=c.onreadystatechange=i,c.src=e;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(c,n)},CJS.eval=function(e){if(window.execScript)window.execScript(e);else{var t=function(){window.eval.call(window,e)};t()}},CJS.init=function(){CJS.bInited=!0,CJS.defer="undefined"==typeof CJS.defer?!0:CJS.defer,CJS.aScripts=[],CJS.hLoaded={},CJS.aExecs=[],CJS.bIE=-1!=navigator.userAgent.indexOf("MSIE"),CJS.bChrome=-1!=navigator.userAgent.indexOf("Chrome/"),CJS.bOpera=-1!=navigator.userAgent.indexOf("Opera"),CJS.curScript=null,CJS.maxWait=5e3,CJS.waitival=200,CJS.docwriteOrig=document.write,document.write=CJS.docwrite},CJS.getAttribute=function(e,t){for(var r=e.attributes,i=r.length,c=0;i>c;c++){var n=r[c];if(t===n.nodeName)return n.nodeValue}},CJS.addHandler=function(e,t,r,i){i=i?!0:!1,e.addEventListener?e.addEventListener(t,r,i):e.attachEvent?e.attachEvent("on"+t,r):e["on"+t]||(e["on"+t]=r)},"undefined"!=typeof console&&"undefined"!=typeof console.log?CJS.dprint=function(e){console.log("CJS "+Number(new Date)+": "+e)}:CJS.dprint=function(e){},CJS.docwrite=function(e){if(CJS.curScript){CJS.curScript.docwriteTarget||(CJS.curScript.docwriteTarget=document.createElement("span"),CJS.curScript.parentNode.insertBefore(CJS.curScript.docwriteTarget,CJS.curScript));var t=e.indexOf("<script");if(-1===t)CJS.dprint("docwrite: "+e.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=e;else{var r=e.indexOf("</script>",t)+9;if(-1!=r){var i=e.substring(0,t),c=e.substring(t,r),n=e.substring(r+1);i&&(CJS.dprint("docwrite: "+i.substring(0,64)),CJS.curScript.docwriteTarget.innerHTML+=i+n),CJS.docwriteScript(c)}}}else CJS.dprint("ERROR: There's a problem with the async override of document.write.")},CJS.docwriteScript=function(e){var t=e.match(/src='([^']*)/i)||e.match(/src="([^"]*)/i)||e.match(/src=([^ >]*)/i);if(t){var r=t[1];CJS.dprint("docwriteScript url = "+r);var i=document.createElement("script");i.src=r,document.body.appendChild(i)}},CJS.start();
